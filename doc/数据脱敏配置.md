Sharding-JDBC 支持**数据脱敏（字段加密/解密）**功能，通过配置脱敏规则实现敏感字段（如手机号、身份证号）的自动加解密。以下是核心配置方式（以 YAML 配置为例，也支持 Java 代码配置）：


### 一、基础脱敏配置结构
```yaml
spring:
  shardingsphere:
    datasource:
      # （先配置数据源，此处省略，和普通分库分表一致）
    rules:
      # 开启数据脱敏规则
      data-mask:
        tables:
          # 要脱敏的表名
          user:
            columns:
              # 要脱敏的字段名
              phone:
                # 脱敏算法类型（内置/自定义）
                type: MASK
                props:
                  # 算法参数（不同算法参数不同）
                  mask-pattern: '*******'  # 示例：手机号脱敏为前3后4显示，中间打码
              id_card:
                type: MASK
                props:
                  mask-pattern: '******************'  # 身份证号脱敏规则
```


### 二、常用内置脱敏算法
Sharding-JDBC 提供了几种内置脱敏算法，可直接配置：
| 算法类型 | 作用 | 配置示例 |
|----------|------|----------|
| `MASK` | 固定掩码（自定义显示规则） | `mask-pattern: '123****456'`（前3后3显示，中间打码） |
| `MD5` | 对字段做 MD5 加密（不可逆） | 无需额外参数，直接配置`type: MD5` |
| `AES` | AES 对称加密（可逆，需密钥） | 需配置`aes-key-value: 1234567812345678`（16位密钥） |


### 三、完整示例（含数据源+脱敏）
```yaml
spring:
  shardingsphere:
    datasource:
      names: ds0
      ds0:
        type: com.zaxxer.hikari.HikariDataSource
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://localhost:3306/test_db?useSSL=false
        username: root
        password: 123456
    rules:
      data-mask:
        tables:
          user:
            columns:
              # 手机号：前3位+****+后4位（示例：138****1234）
              phone:
                type: MASK
                props:
                  mask-pattern: '${value.substr(0,3)}****${value.substr(7,4)}'
              # 身份证号：前6位+****************+后4位
              id_card:
                type: MASK
                props:
                  mask-pattern: '${value.substr(0,6)}****************${value.substr(14,4)}'
              # 密码：MD5加密
              password:
                type: MD5
    props:
      sql-show: true  # 打印SQL，方便调试
```


### 四、注意事项
1. **脱敏时机**：Sharding-JDBC 在 SQL 执行时**自动对字段加解密**（写入时加密，查询时解密），对业务代码无侵入。
2. **自定义算法**：若内置算法不满足，可实现`MaskAlgorithm`接口自定义脱敏逻辑，再配置`type: 自定义算法名称`。
3. **兼容性**：需确保 Sharding-JDBC 版本 ≥ 5.0.0（数据脱敏是 5.x 后新增的规则）。


要不要我帮你整理一份**自定义脱敏算法的代码模板**，方便你实现特定的加密规则？